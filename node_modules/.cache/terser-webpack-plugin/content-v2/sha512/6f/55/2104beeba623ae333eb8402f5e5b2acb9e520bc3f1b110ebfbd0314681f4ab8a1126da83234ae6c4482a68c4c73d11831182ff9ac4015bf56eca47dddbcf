{"code":"!function(e,t){for(var s in t)e[s]=t[s]}(exports,function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,\"a\",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p=\"\",s(s.s=11)}([function(e,t){e.exports=require(\"express\")},function(e,t){e.exports=require(\"underscore\")},function(e,t){e.exports=require(\"express-session\")},function(e,t){e.exports=require(\"sequelize\")},function(e,t){e.exports=require(\"cookie-parser\")},function(e,t){e.exports=require(\"morgan\")},function(e,t){e.exports=require(\"compression\")},function(e,t){e.exports=require(\"redis\")},function(e,t){e.exports=require(\"connect-redis\")},function(e,t){e.exports=require(\"http\")},function(e,t){e.exports=require(\"path\")},function(e,t,s){\"use strict\";s.r(t),s.d(t,\"App\",(function(){return k})),s.d(t,\"express\",(function(){return E}));var i=s(0),n=s.n(i),r=(s(10),s(4)),o=s.n(r),u=s(5),c=s.n(u),a=s(1),f=s.n(a),p=s(6),l=s.n(p),h={use:function(...e){return this.uses.push(e),this},get:function(...e){return this.routers.push([\"get\",e]),this},addRouter:function(...e){return this.routers.push([\"router\",e]),this},addPublic(...e){return this.publicFolders.push(e),this}},d=s(2),g=s.n(d),b=s(7),x=s.n(b),v=s(8),y=s.n(v),m={setSessionConfig:function(e,t,s){return void 0===t?this.config.session.config=e:this.config.session=void 0!==s?{type:e,config:t,redisConfig:s}:{type:e},this},build:function(){if(!0===this.config.useSession){let e=this.config.session.config;if(\"redis\"===this.config.session){e={store:new(y()(g.a))({client:x.a.createClient(this.config.session.redisConfig)}),...this.config.session.config}}this.app.use(g()(e))}}},q=(s(3),{setDatabaseConfig:function(e){this.config.database=e},addModel:function(e){return this.models.push(e),this},addModels:function(...e){return this.models=[...this.models,...e],this}}),C=s(9);let O;var S,j=function(){S=function(e){var t=parseInt(e,10);if(isNaN(t))return e;if(t>=0)return t;return!1}(process.env.PORT||\"3000\"),this.set(\"port\",S),O=C.createServer(this),O.listen(S),O.on(\"error\",w),O.on(\"listening\",P)};function P(){var e=O.address(),t=\"string\"==typeof e?\"pipe \"+e:\"port \"+e.port;console.log(\"Listening on \"+t)}function w(e){if(\"listen\"!==e.syscall)throw e;var t=\"string\"==typeof S?\"Pipe \"+S:\"Port \"+S;switch(e.code){case\"EACCES\":console.error(t+\" requires elevated privileges\"),process.exit(1);break;case\"EADDRINUSE\":console.error(t+\" is already in use\"),process.exit(1);break;default:throw e}}function M(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function _(...e){const t=[\"build\"];f.a.each(e,e=>{f.a.each(Object.keys(e),s=>{-1===t.indexOf(s)&&(this[s]=(...t)=>e[s].call(this,...t))})})}const k=new class{constructor(){M(this,\"app\",n()()),M(this,\"uses\",[]),M(this,\"routers\",[]),M(this,\"publicFolders\",[]),M(this,\"models\",[]),M(this,\"config\",{session:{type:null,config:{},redisConfig:void 0}}),M(this,\"defaultConfig\",{useCors:!1,statics:{},useSession:!0,userCompression:!0}),_.call(this,m,h,q)}setConfig(e){return this}run(){this.config={...this.defaultConfig,...this.config},this.app.set(\"trust proxy\",1),m.build.call(this),this.app.use(c()(\"dev\")),this.app.use(n.a.json()),this.use(n.a.urlencoded({extended:!1})),this.use(o()()),this.use(l()()),f.a.each(this.publicFolders,e=>{1===e.length?this.app.use(n.a.static(...e)):2===e.length&&this.app.use(e[0],n.a.static(e[1]))}),f.a.each(this.uses,e=>{this.app.use(...e)}),f.a.each(this.routers,e=>{let[t,s]=e;this.app[\"router\"===t?\"use\":t](...s)}),j.call(this.app)}},E=n.a}]));","extractedComments":[]}