{"code":"!function(e,r){for(var s in r)e[s]=r[s]}(exports,function(e){var r={};function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=e,s.c=r,s.d=function(e,r,t){s.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},s.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},s.t=function(e,r){if(1&r&&(e=s(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var a in e)s.d(t,a,function(r){return e[r]}.bind(null,a));return t},s.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(r,\"a\",r),r},s.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},s.p=\"\",s(s.s=13)}([function(e,r){e.exports=require(\"underscore\")},function(e,r){e.exports=require(\"express\")},function(e,r){e.exports=require(\"express-session\")},function(e,r){e.exports=require(\"cookie-parser\")},function(e,r){e.exports=require(\"morgan\")},function(e,r){e.exports=require(\"compression\")},function(e,r){e.exports=require(\"redis\")},function(e,r){e.exports=require(\"connect-redis\")},function(e,r){throw new Error(\"Module build failed (from ./node_modules/babel-loader/lib/index.js):\\nSyntaxError: /home/patrick/Workspace/framz/src/core/database/database.js: Unexpected token, expected \\\",\\\" (21:2)\\n\\n\u001b[0m \u001b[90m 19 | \u001b[39m\\tinit(\u001b[33mApp\u001b[39m) {\u001b[0m\\n\u001b[0m \u001b[90m 20 | \u001b[39m\\t\\t\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mdatabases[\u001b[32m'main'\u001b[39m] \u001b[33m=\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mSequelize\u001b[39m({\u001b[33m...\u001b[39m\u001b[33mApp\u001b[39m\u001b[33m.\u001b[39mconfig\u001b[33m.\u001b[39mdatabase\u001b[33m,\u001b[39m dialect\u001b[33m:\u001b[39mpostgres}\u001b[0m\\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 21 | \u001b[39m\\t\\t\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mprocessModels(\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mdatabases[\u001b[32m'main'\u001b[39m])\u001b[0m\\n\u001b[0m \u001b[90m    | \u001b[39m\\t\\t\u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\\n\u001b[0m \u001b[90m 22 | \u001b[39m\u001b[0m\\n\u001b[0m \u001b[90m 23 | \u001b[39m\\t\\t\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mdatabases[\u001b[32m'main'\u001b[39m]\u001b[33m.\u001b[39msync()\u001b[0m\\n\u001b[0m \u001b[90m 24 | \u001b[39m\\t}  \u001b[0m\\n    at Parser._raise (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:766:17)\\n    at Parser.raiseWithData (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:759:17)\\n    at Parser.raise (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:753:17)\\n    at Parser.unexpected (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:8966:16)\\n    at Parser.expect (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:8952:28)\\n    at Parser.parseExprList (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:11009:14)\\n    at Parser.parseNewArguments (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:10594:25)\\n    at Parser.parseNew (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:10588:10)\\n    at Parser.parseNewOrNewTarget (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:10574:17)\\n    at Parser.parseExprAtom (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:10213:21)\\n    at Parser.parseExprSubscripts (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:9844:23)\\n    at Parser.parseUpdate (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:9824:21)\\n    at Parser.parseMaybeUnary (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:9813:17)\\n    at Parser.parseExprOps (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:9683:23)\\n    at Parser.parseMaybeConditional (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:9657:23)\\n    at Parser.parseMaybeAssign (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:9620:21)\\n    at Parser.parseMaybeAssign (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:9644:25)\\n    at Parser.parseExpressionBase (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:9564:23)\\n    at /home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:9558:39\\n    at Parser.allowInAnd (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:11297:16)\\n    at Parser.parseExpression (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:9558:17)\\n    at Parser.parseStatementContent (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:11562:23)\\n    at Parser.parseStatement (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:11431:17)\\n    at Parser.parseBlockOrModuleBlockBody (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:12013:25)\\n    at Parser.parseBlockBody (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:11999:10)\\n    at Parser.parseBlock (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:11983:10)\\n    at Parser.parseFunctionBody (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:10963:24)\\n    at Parser.parseFunctionBodyAndFinish (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:10946:10)\\n    at Parser.parseMethod (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:10883:10)\\n    at Parser.pushClassMethod (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:12430:30)\\n    at Parser.parseClassMemberWithIsStatic (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:12347:12)\\n    at Parser.parseClassMember (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:12289:10)\\n    at /home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:12241:14\\n    at Parser.withTopicForbiddingContext (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:11272:14)\\n    at Parser.parseClassBody (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:12218:10)\\n    at Parser.parseClass (/home/patrick/Workspace/framz/node_modules/@babel/parser/lib/index.js:12193:22)\")},function(e,r){e.exports=require(\"http\")},function(e,r){e.exports=require(\"path\")},function(e,r){e.exports=require(\"socket.io\")},function(e,r){e.exports=require(\"sequelize\")},function(e,r,s){\"use strict\";s.r(r),s.d(r,\"App\",(function(){return N})),s.d(r,\"express\",(function(){return T}));var t=s(1),a=s.n(t),i=(s(10),s(3)),n=s.n(i),o=s(4),c=s.n(o),p=s(0),d=s.n(p),u=s(5),l=s.n(u),m={use:function(...e){return this.uses.push(e),this},get:function(...e){return this.routers.push([\"get\",e]),this},addRouter:function(...e){return this.routers.push([\"router\",e]),this},addPublic(...e){return this.publicFolders.push(e),this}},b=s(2),f=s.n(b),h=s(6),k=s.n(h),x=s(7),g=s.n(x),j={setSessionConfig:function(e,r,s){return void 0===r?this.config.session.config=e:this.config.session=void 0!==s?{type:e,config:r,redisConfig:s}:{type:e},this},init:function(){if(!0===this.config.useSession){let e=this.config.session.config;if(\"redis\"===this.config.session){e={store:new(g()(f.a))({client:k.a.createClient(this.config.session.redisConfig)}),...this.config.session.config}}this.app.use(f()(e))}}},P=s(8),W=s.n(P),_={setDatabaseConfig:function(e){return this.config.database=e,this},addModel:function(e){return this.models.push(e),this},addModels:function(...e){return this.models=[...this.models,...e],this},init:function(){\"object\"==typeof this.config.database&&W.a.init(this)}},z={setSocketConfig:function(e){return this.config.socket=void 0===e?{}:e,this},useSocket:function(e=!0,r=!1){return this.config.useSocket=e,this.config.useSessionSocket=r,this},addRooms:function(...e){return this.sockets=[...this.sockets,...e],this},initSocket:function(e){return this.io=e,console.log(\"Jinit le io\"),this}};var y=new class{constructor(){var e,r,s;s={},(r=\"modules\")in(e=this)?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s}addModule(e){}};var v=new class{constructor(){var e,r,s;s={},(r=\"website\")in(e=this)?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s}addWebsite(e){}},S={addWebsite:function(e){return v.addWebsite(e),this},addWebsites:function(...e){return d.a.each(e,e=>this.addWebsite(e)),this},addModule:function(e){return y.addModule(e),this},addModules:function(...e){return d.a.each(e,e=>this.addModule(e)),this},init:function(){}},C=s(9);let M;var w,O=function(){if(w=function(e){var r=parseInt(e,10);if(isNaN(r))return e;if(r>=0)return r;return!1}(process.env.PORT||\"3000\"),this.app.set(\"port\",w),M=C.createServer(this.app),!0===this.config.useSocket){const e=s(11)(M);this.initSocket(e)}M.listen(w),M.on(\"error\",E),M.on(\"listening\",q)};function q(){var e=M.address(),r=\"string\"==typeof e?\"pipe \"+e:\"port \"+e.port;console.log(\"Listening on \"+r)}function E(e){if(\"listen\"!==e.syscall)throw e;var r=\"string\"==typeof w?\"Pipe \"+w:\"Port \"+w;switch(e.code){case\"EACCES\":console.error(r+\" requires elevated privileges\"),process.exit(1);break;case\"EADDRINUSE\":console.error(r+\" is already in use\"),process.exit(1);break;default:throw e}}function A(e,r,s){return r in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}function B(...e){const r=[\"build\"];d.a.each(e,e=>{d.a.each(Object.keys(e),s=>{\"init\"===s?this.inits.push(e[s]):-1===r.indexOf(s)&&(this[s]=(...r)=>e[s].call(this,...r))})})}var F=new class{constructor(){A(this,\"app\",a()()),A(this,\"uses\",[]),A(this,\"routers\",[]),A(this,\"publicFolders\",[]),A(this,\"models\",[]),A(this,\"sockets\",[]),A(this,\"io\",null),A(this,\"config\",{session:{type:null,config:{},redisConfig:void 0},socket:{}}),A(this,\"defaultConfig\",{useCors:!1,statics:{},useSession:!0,useCompression:!0,useSocket:!1,useSessionSocket:!1}),A(this,\"inits\",[]),B.call(this,j,m,S,_,z)}setConfig(e){return this}run(){this.config={...this.defaultConfig,...this.config},this.app.set(\"trust proxy\",1),d.a.each(this.inits,e=>{e.call(this)}),this.app.use(c()(\"dev\")),this.app.use(a.a.json()),this.use(a.a.urlencoded({extended:!1})),this.use(n()()),this.use(l()()),d.a.each(this.publicFolders,e=>{1===e.length?this.app.use(a.a.static(...e)):2===e.length&&this.app.use(e[0],a.a.static(e[1]))}),d.a.each(this.uses,e=>{this.app.use(...e)}),d.a.each(this.routers,e=>{let[r,s]=e;this.app[\"router\"===r?\"use\":r](...s)}),O.call(this)}};s(12);const N=F,T=a.a}]));","extractedComments":[]}