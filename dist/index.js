!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=28)}([function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,t){e.exports=require("@babel/runtime/helpers/createClass")},function(e,t){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("sequelize")},function(e,t){e.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(e,t){e.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(e,t){e.exports=require("@babel/runtime/helpers/inherits")},function(e,t){e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("http-errors")},function(e,t){e.exports=require("@babel/runtime/helpers/slicedToArray")},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/toArray")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("compression")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("socket.io")},function(e,t){e.exports=require("redis")},function(e,t){e.exports=require("connect-redis")},function(e,t){e.exports=require("@babel/runtime/helpers/classPrivateFieldGet")},function(e,t){e.exports=require("@babel/runtime/helpers/classPrivateFieldSet")},function(e,t){e.exports=require("@babel/runtime/helpers/typeof")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return _e})),n.d(t,"Repository",(function(){return Ie})),n.d(t,"acl",(function(){return Le})),n.d(t,"aclManager",(function(){return Fe})),n.d(t,"cache",(function(){return He})),n.d(t,"crypter",(function(){return ze})),n.d(t,"database",(function(){return Be})),n.d(t,"Model",(function(){return Ge})),n.d(t,"Module",(function(){return We})),n.d(t,"createError",(function(){return Ye})),n.d(t,"express",(function(){return Je})),n.d(t,"Router",(function(){return Ke}));var r,i,o=n(2),s=n.n(o),u=n(3),a=n.n(u),c=function(){function e(t,n,r){s()(this,e),this.req=t,this.Model=n,this.data=r}return a()(e,[{key:"prepareOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===e.row&&(e.row=!0),e}},{key:"create",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new Promise((function(t,r){var i;(i=e.Model).create.apply(i,n).then((function(e){return t(e)})).catch((function(e){return r(e)}))}))}},{key:"createBulk",value:function(){}},{key:"paginate",value:function(e){return this.findAll()}},{key:"findAll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,r){e.Model.findAll(e.prepareOptions(t)).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}},{key:"findById",value:function(e){var t=this;return new Promise((function(n,r){t.Model.findOne(t.prepareOptions({where:e})).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}},{key:"findOne",value:function(){var e=this;return new Promise((function(t,n){e.Model.findOne(e.prepareOptions(args)).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))}},{key:"updateById",value:function(e,t){}},{key:"deleteById",value:function(e){}},{key:"deleteAll",value:function(e){}}]),e}(),l=n(15),f=n.n(l),h=n(4),p=n.n(h),d=n(0),y=n.n(d),v=n(5),g=n.n(v),b=n(16),m=n.n(b),k=n(17),w=n.n(k),O=n(1),P=n.n(O),x=n(18),S=n.n(x),j=n(19),R=n(20),A=n.n(R),M=function(){if(i=function(e){var t=parseInt(e,10);if(isNaN(t))return e;if(t>=0)return t;return!1}(process.env.PORT||this.config.port),this.app.set("port",i),r=j.createServer(this.app),!0===this.config.useSocket){var e=A()(r);this.initSocket(e)}r.listen(i),r.on("error",E),r.on("listening",q)};function q(){var e=r.address(),t="string"==typeof e?"pipe "+e:"port "+e.port;console.log("Listening on "+t)}function E(e){if("listen"!==e.syscall)throw e;var t="string"==typeof i?"Pipe "+i:"Port "+i;switch(e.code){case"EACCES":console.error(t+" requires elevated privileges"),process.exit(1);break;case"EADDRINUSE":console.error(t+" is already in use"),process.exit(1);break;default:throw e}}var C={setPort:function(e){return this.config.port=e,this},use:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.uses.push(t),this},get:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.routers.push(["get"].concat(t)),this},post:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.routers.push(["post"].concat(t)),this},put:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.routers.push(["put"].concat(t)),this},delete:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.routers.push(["delete"].concat(t)),this},addRouter:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.routers.push(["router"].concat(t)),this},addPublic:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.publicFolders.push(t),this}},D=n(13),U=n.n(D),N=n(21),T=n.n(N),_=n(22),I=n.n(_),L=n(23),F=n.n(L),H=n(24),z=n.n(H),B=n(27),G=new WeakMap,W=new(function(){function e(){s()(this,e),G.set(this,{writable:!0,value:null})}return a()(e,[{key:"setSecret",value:function(e){z()(this,G,e)}},{key:"encrypt",value:function(e){return B.createHmac("sha256",F()(this,G)).update(e).digest("hex")}}]),e}());function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var J={useSession:function(e){return"string"==typeof e?(this.config.useSession=!0,this.config.session.config.secret=e,W.setSecret(e)):this.config.useSession=e,this},setSessionConfig:function(e,t,n){void 0===t?this.config.session.config=e:this.config.session=void 0!==n?{type:e,config:t,redisConfig:n}:{type:e};var r=this.config.session.config.secret;return void 0!==r&&W.setSecret(r),this},init:function(){if(!0===this.config.useSession){var e=this.config.session.config;if("redis"===this.config.session)e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({store:new(I()(U.a))({client:T.a.createClient(this.config.session.redisConfig)})},this.config.session.config);this.app.use(U()(e))}}},K=n(25),Q=n.n(K),V=n(6),X=n.n(V),Z=n(7),$=n.n(Z),ee=n(9),te=n.n(ee),ne=n(10),re=n.n(ne),ie=n(8),oe=n.n(ie),se=function(){function e(){s()(this,e),y()(this,"name",void 0),y()(this,"url",null),y()(this,"fields",{}),y()(this,"translatedFields",[]),y()(this,"createForm",null),y()(this,"editForm",null),y()(this,"softDeletable",!1),y()(this,"virtualFields",{}),y()(this,"links",{}),y()(this,"hooks",{})}return a()(e,[{key:"getFields",value:function(){var e=this,t={};return P.a.each(Object.keys(this.fields),(function(n){t[n]={type:e.fieldMapping(n),uniq:n.uniq}})),t}},{key:"build",value:function(e){return e.define(this.name,this.getFields(),{tableName:this.name})}},{key:"fieldMapping",value:function(e){switch(e.type){case"text":return X.a.STRING(void 0!==e.length?e.length:250);case"boolean":return X.a.BOOLEAN;default:return X.a.STRING(void 0!==e.length?e.length:250)}}}]),e}();function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oe()(e);if(t){var i=oe()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return re()(this,n)}}var ae=function(e){te()(n,e);var t=ue(n);function n(){var e;s()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),y()($()(e),"name","user"),y()($()(e),"url","users"),y()($()(e),"fields",{username:{type:"text",uniq:!0,length:250},password:{type:"text",length:500},token:{type:"text",length:500},acl:{type:"text",length:500},tokenExpiresAt:{type:"datetime",length:500},refreshToken:{type:"text",length:500},registrationToken:{type:"text",length:500},registrationTokenExpiresAt:{type:"datetime",length:500},registered:{type:"boolean"},active:{type:"boolean"}}),e}return n}(se);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var le=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main",i=e.databases[r];if(void 0===i)throw new Error("Database '".concat(r,"' is not registered"));var o=i.models[n];if(void 0===o)throw new Error("Model '".concat(n,"' is not registered in database '").concat(r,"'"));var s=e.models[n],u=e.repositories[n],a=void 0!==u?u:c;return new a(t,o,s)};le.hasUrlModel=function(e){return void 0!==le.modelsUrl[e]},le.getUrlRepository=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";return le(e,le.modelsUrl[t],n)},le.databases={main:{database:null,models:{}}},le.modelsUrl={},le.models={user:ae},le.repositories={},le.addRepository=function(e,t){le.repositories[e]=t},le.getModel=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";return le.databases[t].models[e]},le.init=function(e){P.a.each(e.models,(function(e){var t=(new e).name;le.models[t]=e})),le.databases.main.database=new X.a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({dialect:"postgres"},e.config.database)),le.processModels("main"),le.databases.main.database.sync()},le.processModels=function(e){var t=le.databases[e].database;P.a.each(Object.keys(le.models),(function(n){var r=new le.models[n];le.modelsUrl[null!==r.url?r.url:n]=n,le.databases[e].models[n]=r.build(t)}))};var fe=le,he={setDatabaseConfig:function(e){return this.config.database=e,this},addModel:function(e){return this.models.push(e),this},addModels:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.models=[].concat(p()(this.models),t),this},init:function(){"object"===Q()(this.config.database)&&fe.init(this)}},pe=n(12),de=n.n(pe),ye=n(14),ve=n.n(ye),ge=n(26),be=n.n(ge),me=function(e){return new Error("Parameter '".concat(e,"' is required"))},ke=new(function(){function e(){var t=this;s()(this,e),y()(this,"pool",{ROLE_SUPER_ADMIN:{ROLE_ADMIN:{ROLE_USER:{ROLE_ANONYMOUS:{}}}}}),y()(this,"flatPool",{}),y()(this,"isGranted",(function(e,n){if("ROLE_ANONYMOUS"===n)return!0;var r=function(e){return-1===[null,void 0].indexOf(e)},i=function(){return!0===r(e)&&!0===r(e.session)&&!0===r(e.session.user)&&void 0!==t.flatPool[e.session.user.acl]&&-1!==t.flatPool[e.session.user.acl].indexOf(n)},o=!0===r(e)&&!0===r(e.get)?e.get("token"):null;if(!1===r(o))return i();var s=t.getUserByToken(e,o);return e.session.user=null===s?void 0:s,i()})),y()(this,"getUserByToken",function(){var e=be()(ve.a.mark((function e(t,n){var r,i;return ve.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Promise((function(e,r){fe(t,"user").findOne({where:{token:n}}).then((function(t){if(null===t)return r();e(t)})).catch((function(e){return r(!1)}))})),e.prev=1,e.next=4,r;case 4:return i=e.sent,console.log("USER",i),e.abrupt("return",i);case 9:return e.prev=9,e.t0=e.catch(1),console.log("Error",e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),this.prepareHierarchy()}return a()(e,[{key:"setHierarchy",value:function(e){this.pool=e,this.prepareHierarchy()}},{key:"getPool",value:function(){return this.pool}},{key:"addRole",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me("roleName"),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===t)this.pool[e.toUpperCase()]={};else{if(void 0===this.pool[t.toUpperCase()])throw new Error("Role ".concat(t," was not found in hierarchy"));this.pool.ROLE_SUPER_ADMIN[e.toUpperCase()]={}}this.prepareHierarchy()}},{key:"prepareHierarchy",value:function(){var e=this;this.flatPool={};P.a.each(Object.keys(this.pool),(function(t){e.flatPool[t]=function t(n,r){var i=Object.keys(r),o=[n];return P.a.each(i,(function(n){var i=t(n,r[n]);e.flatPool[n]=i,o=[].concat(p()(o),p()(i))})),o}(t,e.pool[t])}))}}]),e}()),we=new(function(){function e(){s()(this,e),y()(this,"rooms",{}),y()(this,"actions",{}),y()(this,"roomAcls",{}),y()(this,"sockets",[])}return a()(e,[{key:"addSockets",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.sockets=[].concat(p()(this.sockets),t)}},{key:"addActions",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];P.a.each(t,(function(e){var t=de()(e,2),n=t[0],r=t[1];void 0===actions[n]&&(actions[n]={},P.a.each(Object.keys(r),(function(e){actions[n].message=r[e]})))}))}},{key:"getRoomType",value:function(e){if("string"==typeof e)return e;if(-1===[null,void 0].indexOf(e)&&"array"===e.constructor.name.toLowerCase()){var t=de()(e,2),n=t[0],r=t[1];return this.roomAcls[n]=r.toUpperCase(),n}return null}},{key:"init",value:function(e){var t=this;P.a.each(this.sockets,(function(n){var r=t.getRoomType(n);null!==r&&(t.rooms[r]=e.of("/socket_".concat(r.toLowerCase())),t.rooms[r].on("connection",(function(e){void 0!==t.roomAcls[r]||P.a.each(t.actions[r],(function(t){var n=de()(t,2),r=n[0],i=n[1];e.on(r,i)}))})))}))}}]),e}()),Oe={setSocketConfig:function(e){return this.config.socket=void 0===e?{}:e,this},useSocket:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.config.useSocket=e,this.config.useSessionSocket=t,this},addRooms:function(){return we.addSockets.apply(we,arguments),this},includeSockets:function(){return we.addActions.apply(we,arguments),this},initSocket:function(e){return we.init(e),this}},Pe=function e(){s()(this,e),y()(this,"name",null),y()(this,"initializers",{}),y()(this,"routers",[]),y()(this,"publicPaths",[]),y()(this,"models",[]),y()(this,"socketRooms",[]),y()(this,"sockets",[]),y()(this,"acls",[])};function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oe()(e);if(t){var i=oe()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return re()(this,n)}}var Se=new(function(e){te()(n,e);var t=xe(n);function n(){var e;s()(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),y()($()(e),"modules",{}),e}return a()(n,[{key:"hasModule",value:function(e){return void 0!==this.modules[e]}},{key:"getModule",value:function(e){return this.modules[e]}},{key:"addModule",value:function(e,t){if(t.prototype instanceof Pe==!1)throw new Error("Parameter must be a Module instance");var n=new t;this.modules[n.name]=n,this.merge(e,n)}}]),n}(function(){function e(){s()(this,e)}return a()(e,[{key:"merge",value:function(e,t){this.mergeInitializers(e,t).mergeModels(e,t).mergeRouters(e,t).mergePublic(e,t).mergeSocketRooms(e,t).mergeSockets(e,t).mergeAcls(e,t)}},{key:"mergeInitializers",value:function(e,t){var n=["constructor"];return P.a.each(Object.keys(t.initializers),(function(r){var i=t.initializers[r];"init"===r?e.inits.push(i):-1===n.indexOf(r)&&(e[r]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.call.apply(i,[e].concat(n))})})),this}},{key:"mergeRouters",value:function(e,t){return P.a.each(t.routers,(function(t){"array"===t.constructor.name.toLowerCase()?e.addRouter.apply(e,p()(t)):e.addRouter(t)})),this}},{key:"mergePublic",value:function(e,t){return P.a.each(t.publicPaths,(function(t){e.addPublic.apply(e,p()(t))})),this}},{key:"mergeModels",value:function(e,t){return e.addModels.apply(e,p()(t.models)),this}},{key:"mergeSocketRooms",value:function(e,t){return e.addRooms.apply(e,p()(t.socketRooms)),this}},{key:"mergeSockets",value:function(e,t){return this}},{key:"mergeAcls",value:function(e,t){return P.a.each(t.acls,(function(t){e.addAcl(t)})),this}}]),e}())),je=new(function(){function e(){s()(this,e),y()(this,"website",{})}return a()(e,[{key:"addWebsite",value:function(e){}}]),e}()),Re={addWebsite:function(e){return je.addWebsite(e),this},addWebsites:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return P.a.each(n,(function(t){return e.addWebsite(t)})),this},addModule:function(e){return Se.addModule(this,e),this},addModules:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return P.a.each(n,(function(t){return e.addModule(t)})),this},getModule:function(e){return Se.getModule(e)},init:function(){}},Ae={setAclHierarchy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me("hierarchy");return ke.setHierarchy(e),this},addAclRole:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me("roleName"),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return ke.addRole(e,t),this},init:function(){ke.prepareHierarchy()}};new(function(){function e(){s()(this,e),y()(this,"loginMethod",null)}return a()(e,[{key:"setLoginMethod",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!==e&&"function"!=typeof e)throw new Error("Custom login method must be a function");this.loginMethod=e}},{key:"login",value:function(e,t){return new Promise((function(t,n){var r=e.username,i=e.password,o=function(e){return-1!==[null,void 0].indexOf(e)};if(!0===o(r)||!0===o(i))return n(new Error("Invalid login parameters"));var s=W(i);fe.getRepository(e,"user").findOne({where:{username:r,password:s,active:!0}}).then((function(e){if(null===e)return n(new Error("User was not found"));t(e)})).catch((function(e){return n(e)}))}))}}]),e}());function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=[C,J,he,Oe,Re,Ae];function Ce(){for(var e=this,t=["build"],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];P.a.each(r,(function(n){P.a.each(Object.keys(n),(function(r){"init"===r?e.inits.push(n[r]):-1===t.indexOf(r)&&(e[r]=function(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(t=n[r]).call.apply(t,[e].concat(o))})}))}))}var De=new(function(){function e(){s()(this,e),y()(this,"app",g()()),y()(this,"uses",[]),y()(this,"routers",[]),y()(this,"publicFolders",[]),y()(this,"models",[]),y()(this,"io",null),y()(this,"config",{customError:null,port:3e3,session:{type:null,config:{},redisConfig:void 0},socket:{}}),y()(this,"defaultConfig",{useCors:!1,statics:{},useSession:!1,useCompression:!0,useSocket:!1,useSessionSocket:!1}),y()(this,"inits",[]),Ce.call.apply(Ce,[this].concat(Ee))}return a()(e,[{key:"run",value:function(){var e=this;this.config=qe(qe({},this.defaultConfig),this.config),this.app.set("trust proxy",1),P.a.each(this.inits,(function(t){t.call(e)})),this.app.use(w()("dev")),this.app.use(g.a.json()),this.use(g.a.urlencoded({extended:!1})),this.use(m()()),this.use(S()()),P.a.each(this.publicFolders,(function(t){1===t.length?e.app.use(g.a.static.apply(g.a,p()(t))):2===t.length&&e.app.use(t[0],g.a.static(t[1]))})),P.a.each(this.uses,(function(t){var n;(n=e.app).use.apply(n,p()(t))})),P.a.each(this.routers,(function(t){var n,r=f()(t),i=r[0],o=r.slice(1);(n=e.app)["router"===i?"use":i].apply(n,p()(o))})),null===this.config.customError&&this.app.use((function(e,t,n,r){n.status(e.status||500).json({valid:!1,error:e.message})})),M.call(this)}}]),e}()),Ue=new(function(){function e(){s()(this,e)}return a()(e,[{key:"get",value:function(e){return new Promise((function(e,t){return null}))}},{key:"set",value:function(e,t,n){}}]),e}()),Ne=n(11),Te=n.n(Ne),_e=De,Ie=c,Le=function(e){return function(t,n,r){return!0===ke.isGranted(t,e)?r():r(Te()(401,"You are not allowed to access this area"))}},Fe=ke,He=Ue,ze=W,Be=fe,Ge=se,We=Pe,Ye=Te.a,Je=g.a,Ke=Je.Router}]));