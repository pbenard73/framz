!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("sequelize")},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("compression")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("socket.io")},function(e,t){e.exports=require("redis")},function(e,t){e.exports=require("connect-redis")},function(e,t){e.exports=require("http-errors")},function(e,t,n){"use strict";n.r(t),n.d(t,"App",(function(){return Ce})),n.d(t,"database",(function(){return Re})),n.d(t,"express",(function(){return Ie})),n.d(t,"acl",(function(){return De}));var r,o,i=n(1),a=n.n(i),u=n(4),s=n.n(u),c=n(5),f=n.n(c),l=n(0),p=n.n(l),h=n(6),y=n.n(h),d=n(7),b=n(8),v=n.n(b),g=function(){if(o=function(e){var t=parseInt(e,10);if(isNaN(t))return e;if(t>=0)return t;return!1}(process.env.PORT||"3000"),this.app.set("port",o),r=d.createServer(this.app),!0===this.config.useSocket){var e=v()(r);this.initSocket(e)}r.listen(o),r.on("error",w),r.on("listening",m)};function m(){var e=r.address(),t="string"==typeof e?"pipe "+e:"port "+e.port;console.log("Listening on "+t)}function w(e){if("listen"!==e.syscall)throw e;var t="string"==typeof o?"Pipe "+o:"Port "+o;switch(e.code){case"EACCES":console.error(t+" requires elevated privileges"),process.exit(1);break;case"EADDRINUSE":console.error(t+" is already in use"),process.exit(1);break;default:throw e}}var O={use:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.uses.push(t),this},get:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.routers.push(["get",t]),this},post:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.routers.push(["post",t]),this},put:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.routers.push(["put",t]),this},delete:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.routers.push(["delete",t]),this},addRouter:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.routers.push(["router",t]),this},addPublic:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.publicFolders.push(t),this}},j=n(3),S=n.n(j),P=n(9),k=n.n(P),A=n(10),E=n.n(A);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C={useSession:function(e){return"string"==typeof e?(this.config.useSession=!0,this.config.session.config.secret=e):this.config.useSession=e,this},setSessionConfig:function(e,t,n){return void 0===t?this.config.session.config=e:this.config.session=void 0!==n?{type:e,config:t,redisConfig:n}:{type:e},this},init:function(){if(!0===this.config.useSession){var e=this.config.session.config;if("redis"===this.config.session)e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({store:new(E()(S.a))({client:k.a.createClient(this.config.session.redisConfig)})},this.config.session.config);this.app.use(S()(e))}}},R=n(2),I=n.n(R);function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var o=F(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function H(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(n,e);var t=U(n);function n(){var e;q(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return B(L(e=t.call.apply(t,[this].concat(o))),"name","user"),B(L(e),"fields",{username:{type:"text",uniq:!0,length:250},password:{type:"text",length:500}}),e}return n}(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),T(this,"name",void 0),T(this,"fields",{}),T(this,"translatedFields",[]),T(this,"createForm",null),T(this,"editForm",null),T(this,"softDeletable",!1),T(this,"virtualFields",{}),T(this,"links",{}),T(this,"hooks",{})}var t,n,r;return t=e,(n=[{key:"build",value:function(e){var t=this,n={};return p.a.each(Object.keys(this.fields),(function(e){n[e]={type:t.fieldMapping(e),uniq:e.uniq}})),e.define(this.name,n,{tableName:this.name})}},{key:"fieldMapping",value:function(e){switch(e.type){case"text":return I.a.STRING(void 0!==e.length?e.length:250);case"boolean":return I.a.BOOLEAN;default:return I.a.STRING(void 0!==e.length?e.length:250)}}}])&&D(t.prototype,n),r&&D(t,r),e}());function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.req=t,this.Model=n,this.data=r}var t,n,r;return t=e,(n=[{key:"prepareOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===e.row&&(e.row=!0),e}},{key:"create",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new Promise((function(t,r){var o;(o=e.Model).create.apply(o,n).then((function(e){return t(e)})).catch((function(e){return r(e)}))}))}},{key:"createBulk",value:function(){}},{key:"findAll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,r){e.Model.findAll(e.prepareOptions(t)).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}},{key:"findById",value:function(e){var t=this;return new Promise((function(n,r){t.Model.findOne(t.prepareOptions({where:e})).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}},{key:"findOne",value:function(){var e=this;return new Promise((function(t,n){e.Model.findOne(e.prepareOptions(args)).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))}},{key:"updateById",value:function(e,t){}},{key:"deleteById",value:function(e){}},{key:"deleteAll",value:function(e){}}])&&G(t.prototype,n),r&&G(t,r),e}();function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),J(this,"databases",{main:{database:null,models:{}}}),J(this,"models",{user:W}),J(this,"repositories",{})}var t,n,r;return t=e,(n=[{key:"addRepository",value:function(e,t){this.repositories[e]=t}},{key:"getModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";return this.databases[t].models[e]}},{key:"init",value:function(e){this.databases.main.database=new I.a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({dialect:"postgres"},e.config.database)),this.processModels("main"),this.databases.main.database.sync()}},{key:"processModels",value:function(e){var t=this,n=this.databases[e].database;p.a.each(Object.keys(this.models),(function(r){t.databases[e].models[r]=(new t.models[r]).build(n)}))}},{key:"getRepository",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main",r=this.databases[n];if(void 0===r)throw new Error("Database '".concat(n,"' is not registered"));var o=r.models[t];if(void 0===o)throw new Error("Model '".concat(t,"' is not registered in database '").concat(n,"'"));var i=this.models[t],a=this.repositories[t],u=void 0!==a?a:$;return new u(e,o,i)}}])&&z(t.prototype,n),r&&z(t,r),e}());function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z={setDatabaseConfig:function(e){return this.config.database=e,this},addModel:function(e){return this.models.push(e),this},addModels:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.models=[].concat(V(this.models),t),this},init:function(){"object"===Q(this.config.database)&&K.init(this)}};function ee(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ne={setSocketConfig:function(e){return this.config.socket=void 0===e?{}:e,this},useSocket:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.config.useSocket=e,this.config.useSessionSocket=t,this},addRooms:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.sockets=[].concat(ee(this.sockets),t),this},initSocket:function(e){return this.io=e,console.log("Jinit le io"),this}};function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var oe=new(function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r={},(n="modules")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r;return t=e,(n=[{key:"addModule",value:function(e){}}])&&re(t.prototype,n),r&&re(t,r),e}());function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ae=new(function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r={},(n="website")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r;return t=e,(n=[{key:"addWebsite",value:function(e){}}])&&ie(t.prototype,n),r&&ie(t,r),e}()),ue={addWebsite:function(e){return ae.addWebsite(e),this},addWebsites:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p.a.each(n,(function(t){return e.addWebsite(t)})),this},addModule:function(e){return oe.addModule(e),this},addModules:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p.a.each(n,(function(t){return e.addModule(t)})),this},init:function(){}},se=function(e){return new Error("Parameter '".concat(e,"' is required"))};function ce(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),pe(this,"pool",{ROLE_SUPER_ADMIN:{ROLE_ADMIN:{ROLE_USER:{ROLE_ANONYMOUS:{}}}}}),pe(this,"flatPool",{}),this.prepareHierarchy()}var t,n,r;return t=e,(n=[{key:"setHierarchy",value:function(e){this.pool=e,this.prepareHierarchy()}},{key:"addRole",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se("roleName"),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===t)this.pool[e.toUpperCase()]={};else if(void 0===this.pool[t.toUpperCase()])throw new Error("Role ".concat(t," was not found in hierarchy"));this.prepareHierarchy()}},{key:"prepareHierarchy",value:function(){var e=this;this.flatPool={},p.a.each(Object.keys(this.pool),(function(t){e.flatPool[t]=function t(n,r){var o=Object.keys(r),i=[n];return p.a.each(o,(function(n){var o=t(n,r[n]);e.flatPool[n]=o,i=[].concat(ce(i),ce(o))})),i}(t,e.pool[t])}))}},{key:"isGranted",value:function(e,t){return"ROLE_ANONYMOUS"===t||void 0!==e.session&&void 0!==e.session.user&&void 0!==this.flatPool[e.session.user.acl]&&-1!==this.flatPool[e.session.user.acl].indexOf(t)}}])&&le(t.prototype,n),r&&le(t,r),e}()),ye={setAclHierarchy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se("hierarchy");return he.setHierarchy(e),this},addAclRole:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se("roleName"),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return he.addRole(e,t),this},init:function(){he.prepareHierarchy()}},de={useAdmin:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.config.admin.use=e,this},init:function(){console.log("Use Admin :"+this.config.admin.use)}};function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}new(function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=null,(n="loginMethod")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r;return t=e,(n=[{key:"setLoginMethod",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!==e&&"function"!=typeof e)throw new Error("Custom login method must be a function");this.loginMethod=e}},{key:"login",value:function(e){return new Promise((function(t,n){var r=e.username,o=e.password,i=function(e){return-1!==[null,void 0].indexOf(e)};if(!0===i(r)||!0===i(o))return n(new Error("Invalid login parameters"))}))}}])&&be(t.prototype,n),r&&be(t,r),e}());function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||me(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||me(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){if(e){if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke=[O,C,Z,ne,ue,ye,de];function Ae(){for(var e=this,t=["build"],n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];p.a.each(r,(function(n){p.a.each(Object.keys(n),(function(r){"init"===r?e.inits.push(n[r]):-1===t.indexOf(r)&&(e[r]=function(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=n[r]).call.apply(t,[e].concat(i))})}))}))}var Ee=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Pe(this,"app",a()()),Pe(this,"uses",[]),Pe(this,"routers",[]),Pe(this,"publicFolders",[]),Pe(this,"models",[]),Pe(this,"sockets",[]),Pe(this,"io",null),Pe(this,"config",{admin:{use:!1},session:{type:null,config:{},redisConfig:void 0},socket:{}}),Pe(this,"defaultConfig",{useCors:!1,statics:{},useSession:!1,useCompression:!0,useSocket:!1,useSessionSocket:!1}),Pe(this,"inits",[]),Ae.call.apply(Ae,[this].concat(ke))}var t,n,r;return t=e,(n=[{key:"run",value:function(){var e=this;this.config=je(je({},this.defaultConfig),this.config),this.app.set("trust proxy",1),p.a.each(this.inits,(function(t){t.call(e)})),this.app.use(f()("dev")),this.app.use(a.a.json()),this.use(a.a.urlencoded({extended:!1})),this.use(s()()),this.use(y()()),p.a.each(this.publicFolders,(function(t){1===t.length?e.app.use(a.a.static.apply(a.a,ge(t))):2===t.length&&e.app.use(t[0],a.a.static(t[1]))})),p.a.each(this.uses,(function(t){var n;(n=e.app).use.apply(n,ge(t))})),p.a.each(this.routers,(function(t){var n,r=ve(t,2),o=r[0],i=r[1];(n=e.app)["router"===o?"use":o].apply(n,ge(i))})),g.call(this)}}])&&Se(t.prototype,n),r&&Se(t,r),e}()),xe=n(11),Me=n.n(xe),Ce=Ee,Re=K,Ie=a.a,De=function(e){return function(t,n,r){return!0===he.isGranted(t,e)?r():r(Me()(401,"You are not allowed to access this area"))}}}]));